---
slug: updates_2024-06-14
Title: Updates 2024-06-14
authors: [confused-moniker]
tags: [iguhealth, updates]
---

# Updates 2024-06-14

## Testing
We our beginning our migration to [TestScript](/documentation/Data_model/R4/TestScript) resources.
This will replace our jest tests against our API and allow us to publish results as TestReports on our main site.

### TestScript Runner
We've published our TestScript Runner as an NPM package [here](https://www.npmjs.com/package/@iguhealth/testscript-runner).

### Testing on CLI
You can run our testscript runner via our latest cli update:
```
iguhealth test run -i testscripts -o testreports
```
* -i , --input: The directory where the testscripts are located.
* -o , --output: The directory where the testreports will be output.

## Server Enhancements

### Stronger restrictions on CSP 
We have added stronger restrictions on CSP headers in particular to disallow inline scripts and styles.

### Conditional Deletes
We now support conditional deletes on the server. You can now delete resources based on a conditional query.
```bash
DELETE /Patient?name=John
```

## Client Alterations
### Invoke by code
We now support invoke operations via Client with code instead of an Operation Instance. For this you pass a Parameter Resource instead of the simplified JS Object.
```typescript
const invocation = await client
    .invoke_type("validate", {}, R4, "Patient", {
      resourceType: "Parameters",
      parameter: [
        {
          name: "resource",
          resource: patient,
        },
      ],
    } as Parameters)
```

## General

### Updated Packages
* @iguhealth/cli: 1.4.11
* @iguhealth/client: 0.8.10
* @iguhealth/components: 0.7.18
* @iguhealth/fhirpath: 0.5.6
* @iguhealth/generated-ops: 0.5.11
* @iguhealth/server: 0.14.28
* @iguhealth/testscript-runner: 0.0.4
* @iguhealth/admin-app: 0.8.11


